% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/years_lived_free.R
\name{calculate_disease_free_survival}
\alias{calculate_disease_free_survival}
\title{Calculate Disease-Free Survival and Overall Survival Times}
\usage{
calculate_disease_free_survival(
  data,
  time_event_col,
  time_death_col,
  event_col,
  death_col,
  index_age,
  restriction_time = NULL,
  strata_col = NULL,
  n_bootstrap = 1000,
  small_delta = 0.001
)
}
\arguments{
\item{data}{A data frame containing the survival data}

\item{time_event_col}{Character string specifying the column name for time to disease event}

\item{time_death_col}{Character string specifying the column name for time to death}

\item{event_col}{Character string specifying the column name for disease event indicator (1 = event, 0 = censored)}

\item{death_col}{Character string specifying the column name for death indicator (1 = death, 0 = censored)}

\item{index_age}{Numeric value specifying the index age for analysis}

\item{restriction_time}{Numeric value specifying the maximum time point for restricted mean survival calculation.
If NULL, uses 99\% of maximum observed time. Default is NULL.}

\item{strata_col}{Optional character string specifying the column name for stratification.
Can be numeric, factor, or character. For factors, maintains level ordering.
For numeric and character variables, sorts in ascending order. Default is NULL.}

\item{n_bootstrap}{Integer specifying the number of bootstrap samples for standard error estimation.
Default is 1000.}

\item{small_delta}{Numeric value added to zero time values to prevent computation issues.
Default is 0.001.}
}
\value{
A list with class either "survival_results" (non-stratified) or
"stratified_survival_results" (stratified) containing:
\itemize{
\item event_free_survival: Restricted mean survival time free of disease
\item overall_survival: Restricted mean overall survival time
\item years_with_event: Mean years lived with disease
\item se_event_free: Standard error for disease-free survival
\item se_overall: Standard error for overall survival
\item se_difference: Standard error for years with disease
\item n_observations: Number of subjects
\item n_events: Number of disease events
\item n_deaths: Number of deaths
\item restriction_time: Time point used for restricted mean calculation
}
}
\description{
Calculates restricted mean survival time for disease-free survival and overall survival,
implementing the method described in published cardiovascular research. The function can
perform both stratified and non-stratified analyses, and uses bootstrap resampling
for standard error estimation.
}
\details{
The function implements restricted mean survival time analysis accounting for competing
risks. For disease-free survival, both disease onset and death are considered as events.
Bootstrap resampling is used to estimate standard errors. The analysis can be performed
overall or within strata defined by a grouping variable.

Time variables should be in the same units (e.g., years). Event indicators should be
binary (1 = event, 0 = censored). Zero time values are adjusted by adding a small
constant to prevent computational issues.
}
\examples{
\dontrun{
# Non-stratified analysis
results <- calculate_disease_free_survival(
  data = my_data,
  time_event_col = "time_to_event",
  time_death_col = "time_to_death",
  event_col = "event_status",
  death_col = "death_status",
  index_age = 45,
  restriction_time = 95
)

# Print results with standard errors
print(results)

# Print results with confidence intervals
print(results, ci = TRUE)

# Stratified analysis by risk group
results_strat <- calculate_disease_free_survival(
  data = my_data,
  time_event_col = "time_to_event",
  time_death_col = "time_to_death",
  event_col = "event_status",
  death_col = "death_status",
  index_age = 45,
  restriction_time = 95,
  strata_col = "risk_group"
)

# Print stratified results
print(results_strat)
}

}
\references{
Based on methods described in cardiovascular epidemiology research using
restricted mean survival time analysis.
}
\seealso{
\code{\link[survival]{Surv}}, \code{\link[survival]{survfit}}
}
