% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pie_analysis.R
\name{pie_analysis}
\alias{pie_analysis}
\title{Main Analysis Function}
\usage{
pie_analysis(
  data,
  min_age,
  max_age,
  age_group_width,
  group_var = NULL,
  group_levels = NULL,
  age_free,
  output1 = NULL,
  output2 = NULL,
  debug = FALSE
)
}
\arguments{
\item{data}{A data frame containing the input data. Must include: ids, entryage, survage, status, astatus, and optionally grouping variables.}

\item{min_age}{Minimum age to consider}

\item{max_age}{Maximum age to consider}

\item{age_group_width}{Width of age groups (e.g., 5 for 5-year intervals)}

\item{group_var}{Name of grouping variable (string, optional, NULL for overall analysis)}

\item{group_levels}{Vector of group levels to analyze (NULL to auto-detect all levels)}

\item{age_free}{Starting age for survival analysis}

\item{debug}{If TRUE, save intermediate datasets to global environment}
}
\value{
An S3 object of class 'pie_analysis' containing:
\itemize{
\item age_specific_rates: list of data.tables by group
\item cumulative_incidence: list of data.frames by group
\item summary_datasets: list of summary tables by group
\item parameters: list of analysis parameters
}
}
\description{
Performs person-year and lifetime risk analysis, including age-specific rates and cumulative incidence, for the overall population or by group.
}
\details{
This function implements the full PIE macro workflow, including person-year expansion, age-specific rates, and cumulative incidence with and without competing risk adjustment. Handles any number of groups.
}
\examples{
result <- pie_analysis(test_data, min_age = 50, max_age = 80, age_group_width = 5, group_var = "group", age_free = 50)
summary(result)
}
